CREATE TABLE SBSCOMPANY
(
SABEON VARCHAR2(5) PRIMARY KEY,
AGE INT,
BIRTHDAY DATE DEFAULT SYSDATE
);

INSERT INTO SBSCOMPANY (AGE, SABEON)VALUES (34,'00000');
SELECT * FROM SBSCOMPANY;

-- 이름이랑 부서 컬럼을 추가한다.(둘 다 VARCHAR2)
ALTER TABLE SBSCOMPANY ADD NAME VARCHAR2(100);
ALTER TABLE SBSCOMPANY ADD BUSEO VARCHAR2(100);
-- BIRTHDAY 컬럼은 IPSAIL로 컬럼명을 바꾼다.
--ALTER TABLE mysoldier MODIFY GENDER VARCHAR2(3);
-- MODIFY : 타입 바꿀 때 쓴다.
-- 이름만 바꾸고 싶다면? RENAME COLUMN
ALTER TABLE SBSCOMPANY RENAME COLUMN BIRTHDAY TO IPSAIL;

--ORA-01439: 데이터 유형을 변경할 열은 비어 있어야 합니다
ALTER TABLE SBSCOMPANY MODIFY SABEON INT;
DELETE FROM SBSCOMPANY;

-- 사원 10명의 데이터를 추가한다.
-- IPSAIL 형식이 23/03/27인데 2023-03-27 이렇게 나오게 바꿔 보세요.
-- 도구->환경설정->NLS라고 검색 -> RR/MM/DD -> YYYY-MM-DD로 변경
SELECT * FROM SBSCOMPANY;

INSERT INTO SBSCOMPANY(SABEON,AGE,NAME,BUSEO) VALUES
(0,34,'소병수','임원');

-- 기존 데이터를 다른 곳으로 우선 옮기려고 한다.
-- 왜냐면 sbscompany를 싹 비우고, 컬럼을 변경할 예정이기 때문이다.
create table tempsbs as select * FROM SBSCOMPANY;
SELECT * FROM TEMPSBS;


-- 부서를 관리하는 테이블을 만들고 두 테이블을 연결한다.
CREATE TABLE BUSEOGWALI
(
CODE CHAR(5) PRIMARY KEY,
NAME VARCHAR2(100) NOT NULL
);
-- 임원,경영지원,개발부 이렇게 최소 3개 이상의 부서가 있어야 한다.
INSERT INTO BUSEOGWALI VALUES('00001', '임원');
INSERT INTO BUSEOGWALI VALUES('00002', '경영지원');
INSERT INTO BUSEOGWALI VALUES('00003', '개발부');

-- 앞서 추가한 사원들이 각각 여기에 속하게 해볼 것
DELETE FROM SBSCOMPANY;

-- 컬럼 삭제
ALTER TABLE SBSCOMPANY DROP COLUMN BUSEO;
-- 컬럼 추가
-- 참고할 컬럼과 이름은 달라도 되지만 타입과 BYTE크기는 모두 같아야 된다.
ALTER TABLE SBSCOMPANY ADD BUSEOCODE CHAR(5);
-- 외래키 추가
-- 주의!) BUSEOGWALI가 아니라 SBSCOMPANY에 FK를 추가하는 것
ALTER TABLE SBSCOMPANY ADD CONSTRAINT FK_BUSEO 
FOREIGN KEY(BUSEOCODE) REFERENCES BUSEOGWALI(CODE);

insert into sbscompany (sabeon, age, name, buseocode)
values (0,34,'소병수','00001');
insert into sbscompany (sabeon, age, name, buseocode)
values (1,35,'이동준','00002');
insert into sbscompany (sabeon, age, name, buseocode)
values (2,25,'임나현','00003');


select * from sbscompany;


-- 사번, 나이, 이름, 부서명이 나오게 출력해보세요.(join)
-- join을 이용하여 view를 만들어보세요.
-- 각 부서에 사람을 각각 3명씩 더 추가하시오
-- 각 부서의 평균 나이를 출력하시오
-- 평균 나이가 30을 넘는 부서만 출력해보시오





